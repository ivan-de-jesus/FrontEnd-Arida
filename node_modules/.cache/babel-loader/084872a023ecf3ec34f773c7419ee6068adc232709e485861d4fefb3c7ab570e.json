{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { Carousel } from \"bootstrap\";\nimport PhotoCapture from \"@/components/PhotoCapture.vue\";\nimport MapView from \"@/components/MapView.vue\";\n/* estado */\n\nexport default {\n  __name: 'FlowCarousel',\n  setup(__props) {\n    const step = ref(1); // 1 = PhotoCapture, 2 = MapView\n    const coords = ref(null); // { latitude, longitude }\n    const ndwi = ref(null);\n    const status = ref(null);\n    const loading = ref(false);\n    const statusColor = computed(() => {\n      switch (status.value) {\n        case 'Seco':\n          return 'red';\n        case 'Medio':\n          return 'yellow';\n        case 'Húmedo':\n          return 'green';\n        default:\n          return 'gray';\n      }\n    });\n\n    /* bootstrap carousel */\n    const carouselEl = ref(null);\n    let bsCarousel;\n    onMounted(() => {\n      bsCarousel = new Carousel(carouselEl.value, {\n        touch: true,\n        interval: false\n      });\n    });\n\n    /* cuando PhotoCapture emite */\n    function handleCaptured({\n      coords: c\n    }) {\n      coords.value = c;\n      loading.value = true;\n      step.value = 2;\n      bsCarousel.next(); // va a la diapositiva 2\n    }\n\n    /* recibir cálculo NDWI */\n    function updateNdwiStatus({\n      ndwi: n,\n      status: s\n    }) {\n      ndwi.value = n;\n      status.value = s;\n      loading.value = false;\n    }\n    return {\n      __sfc: true,\n      step,\n      coords,\n      ndwi,\n      status,\n      loading,\n      statusColor,\n      carouselEl,\n      bsCarousel,\n      handleCaptured,\n      updateNdwiStatus,\n      PhotoCapture,\n      MapView\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","Carousel","PhotoCapture","MapView","step","coords","ndwi","status","loading","statusColor","value","carouselEl","bsCarousel","touch","interval","handleCaptured","c","next","updateNdwiStatus","n","s"],"sources":["FlowCarousel.vue"],"sourcesContent":["<!-- src/components/FlowCarousel.vue -->\r\n<template>\r\n  <div\r\n    id=\"flowCarousel\"\r\n    class=\"carousel slide\"\r\n    data-bs-touch=\"true\"\r\n    :data-bs-interval=\"false\"\r\n    ref=\"carouselEl\"\r\n  >\r\n    <!-- indicadores (2 dots) -->\r\n    <div class=\"carousel-indicators\">\r\n      <button\r\n        v-for=\"n in 2\"\r\n        :key=\"n\"\r\n        type=\"button\"\r\n        :data-bs-target=\"'#flowCarousel'\"\r\n        :data-bs-slide-to=\"n - 1\"\r\n        :class=\"{ active: step === n }\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"carousel-inner\">\r\n      <!-- DIAPOSITIVA 1  ·  PhotoCapture -->\r\n      <div class=\"carousel-item active\">\r\n        <PhotoCapture @captured=\"handleCaptured\" />\r\n      </div>\r\n\r\n      <!-- DIAPOSITIVA 2  ·  MapView + semáforo -->\r\n      <div class=\"carousel-item\">\r\n        <transition name=\"fade\">\r\n          <MapView\r\n            v-if=\"step === 2\"\r\n            :coords=\"coords\"\r\n            @ndwi-status=\"updateNdwiStatus\"\r\n          />\r\n        </transition>\r\n\r\n        <div class=\"mt-3 card p-3\" v-if=\"step === 2\">\r\n          <h5>Estado de humedad</h5>\r\n          <div v-if=\"loading\" class=\"text-center\">Calculando NDWI…</div>\r\n          <div v-else>\r\n            <p v-if=\"status\" class=\"d-flex align-items-center gap-2\">\r\n              <span :class=\"`dot-${statusColor}`\"></span>\r\n              <strong>{{ status }}</strong>\r\n              <span v-if=\"ndwi !== null\">– NDWI: {{ ndwi.toFixed(2) }}</span>\r\n            </p>\r\n            <p v-else class=\"text-muted\">No se pudo calcular NDWI</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\n\r\n\r\nimport { Carousel } from \"bootstrap\";\r\nimport PhotoCapture from \"@/components/PhotoCapture.vue\";\r\nimport MapView from \"@/components/MapView.vue\";\r\n/* estado */\r\nconst step = ref(1); // 1 = PhotoCapture, 2 = MapView\r\nconst coords = ref(null); // { latitude, longitude }\r\nconst ndwi = ref(null);\r\nconst status = ref(null);\r\nconst loading = ref(false);\r\n\r\nconst statusColor = computed(() => {\r\n  switch (status.value) {\r\n    case 'Seco':   return 'red'\r\n    case 'Medio':  return 'yellow'\r\n    case 'Húmedo': return 'green'\r\n    default:       return 'gray'\r\n  }\r\n})\r\n\r\n\r\n\r\n/* bootstrap carousel */\r\nconst carouselEl = ref(null);\r\nlet bsCarousel;\r\nonMounted(() => {\r\n  bsCarousel = new Carousel(carouselEl.value, { touch: true, interval: false });\r\n});\r\n\r\n/* cuando PhotoCapture emite */\r\nfunction handleCaptured({ coords: c }) {\r\n  coords.value = c;\r\n  loading.value = true;\r\n  step.value = 2;\r\n  bsCarousel.next(); // va a la diapositiva 2\r\n}\r\n\r\n/* recibir cálculo NDWI */\r\nfunction updateNdwiStatus({ ndwi: n, status: s }) {\r\n  ndwi.value = n;\r\n  status.value = s;\r\n  loading.value = false;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.carousel-indicators {\r\n  position: relative; /* deja de ser absolute */\r\n  margin-top: 12px; /* lo separa de la card */\r\n  justify-content: center; /* centra los dots */\r\n  gap: 6px; /* espacito entre ellos */\r\n  padding: 0; /* quita el padding default de BS */\r\n}\r\n\r\n/* los propios dots (ya los tenías; ajusto sólo tamaños) */\r\n.carousel-indicators [data-bs-target] {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: #adb5bd;\r\n  border: none;\r\n  opacity: 0.7;\r\n}\r\n.carousel-indicators .active {\r\n  background: #000;\r\n  opacity: 1;\r\n}\r\n\r\n[class^=\"dot-\"]{\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n}\r\n\r\n.dot-red   { background:#dc3545; }   /* rojo Bootstrap */\r\n.dot-yellow{ background:#ffc107; }   /* amarillo BS */\r\n.dot-green { background:#28a745; }   /* verde BS   */\r\n.dot-gray  { background:#6c757d; }   /* fallback   */\r\n\r\n#flowCarousel {\r\n  width: 350px;      /* fijar, no max-width */\r\n  margin: 0 auto;    /* centrar dentro del contenido */\r\n  overflow: hidden;  /* nada se asoma fuera */\r\n}\r\n\r\n/* el carrusel interno hereda el mismo ancho */\r\n#flowCarousel .carousel-inner {\r\n  width: 350px;\r\n}\r\n\r\n#flowCarousel .carousel-item {\r\n  width: 350px;      /* cada slide ocupa TODO el ancho del contenedor */\r\n}\r\n</style>\r\n"],"mappings":"AAuDA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAG9C,SAASC,QAAQ,QAAQ,WAAW;AACpC,OAAOC,YAAY,MAAM,+BAA+B;AACxD,OAAOC,OAAO,MAAM,0BAA0B;AAC9C;;;;;IACA,MAAMC,IAAI,GAAGN,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,MAAMO,MAAM,GAAGP,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1B,MAAMQ,IAAI,GAAGR,GAAG,CAAC,IAAI,CAAC;IACtB,MAAMS,MAAM,GAAGT,GAAG,CAAC,IAAI,CAAC;IACxB,MAAMU,OAAO,GAAGV,GAAG,CAAC,KAAK,CAAC;IAE1B,MAAMW,WAAW,GAAGV,QAAQ,CAAC,MAAM;MACjC,QAAQQ,MAAM,CAACG,KAAK;QAClB,KAAK,MAAM;UAAI,OAAO,KAAK;QAC3B,KAAK,OAAO;UAAG,OAAO,QAAQ;QAC9B,KAAK,QAAQ;UAAE,OAAO,OAAO;QAC7B;UAAe,OAAO,MAAM;MAC9B;IACF,CAAC,CAAC;;IAIF;IACA,MAAMC,UAAU,GAAGb,GAAG,CAAC,IAAI,CAAC;IAC5B,IAAIc,UAAU;IACdZ,SAAS,CAAC,MAAM;MACdY,UAAU,GAAG,IAAIX,QAAQ,CAACU,UAAU,CAACD,KAAK,EAAE;QAAEG,KAAK,EAAE,IAAI;QAAEC,QAAQ,EAAE;MAAM,CAAC,CAAC;IAC/E,CAAC,CAAC;;IAEF;IACA,SAASC,cAAcA,CAAC;MAAEV,MAAM,EAAEW;IAAE,CAAC,EAAE;MACrCX,MAAM,CAACK,KAAK,GAAGM,CAAC;MAChBR,OAAO,CAACE,KAAK,GAAG,IAAI;MACpBN,IAAI,CAACM,KAAK,GAAG,CAAC;MACdE,UAAU,CAACK,IAAI,CAAC,CAAC,CAAC,CAAC;IACrB;;IAEA;IACA,SAASC,gBAAgBA,CAAC;MAAEZ,IAAI,EAAEa,CAAC;MAAEZ,MAAM,EAAEa;IAAE,CAAC,EAAE;MAChDd,IAAI,CAACI,KAAK,GAAGS,CAAC;MACdZ,MAAM,CAACG,KAAK,GAAGU,CAAC;MAChBZ,OAAO,CAACE,KAAK,GAAG,KAAK;IACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}