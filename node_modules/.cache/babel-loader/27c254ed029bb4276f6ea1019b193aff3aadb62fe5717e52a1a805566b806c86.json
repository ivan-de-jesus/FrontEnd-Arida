{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { Carousel } from 'bootstrap';\nimport PhotoCapture from '@/components/PhotoCapture.vue';\nimport MapView from '@/components/MapView.vue';\n\n/* estado */\n\nexport default {\n  __name: 'FlowCarousel',\n  setup(__props) {\n    const step = ref(1); // 1 = PhotoCapture, 2 = MapView\n    const coords = ref(null); // { latitude, longitude }\n    const ndwi = ref(null);\n    const status = ref(null);\n    const loading = ref(false);\n\n    /* bootstrap carousel */\n    const carouselEl = ref(null);\n    let bsCarousel;\n    onMounted(() => {\n      bsCarousel = new Carousel(carouselEl.value, {\n        touch: true,\n        interval: false\n      });\n    });\n\n    /* cuando PhotoCapture emite */\n    function handleCaptured({\n      coords: c\n    }) {\n      coords.value = c;\n      loading.value = true;\n      step.value = 2;\n      bsCarousel.next(); // va a la diapositiva 2\n    }\n\n    /* recibir cálculo NDWI */\n    function updateNdwiStatus({\n      ndwi: n,\n      status: s\n    }) {\n      ndwi.value = n;\n      status.value = s;\n      loading.value = false;\n    }\n    return {\n      __sfc: true,\n      step,\n      coords,\n      ndwi,\n      status,\n      loading,\n      carouselEl,\n      bsCarousel,\n      handleCaptured,\n      updateNdwiStatus,\n      PhotoCapture,\n      MapView\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","Carousel","PhotoCapture","MapView","step","coords","ndwi","status","loading","carouselEl","bsCarousel","value","touch","interval","handleCaptured","c","next","updateNdwiStatus","n","s"],"sources":["FlowCarousel.vue"],"sourcesContent":["<!-- src/components/FlowCarousel.vue -->\r\n<template>\r\n  <div\r\n    id=\"flowCarousel\"\r\n    class=\"carousel slide\"\r\n    data-bs-touch=\"true\"\r\n    :data-bs-interval=\"false\"\r\n    ref=\"carouselEl\"\r\n  >\r\n    <!-- indicadores (2 dots) -->\r\n    <div class=\"carousel-indicators\">\r\n      <button v-for=\"n in 2\"\r\n              :key=\"n\"\r\n              type=\"button\"\r\n              :data-bs-target=\"'#flowCarousel'\"\r\n              :data-bs-slide-to=\"n - 1\"\r\n              :class=\"{ active: step === n }\" />\r\n    </div>\r\n\r\n    <div class=\"carousel-inner\">\r\n\r\n      <!-- DIAPOSITIVA 1  ·  PhotoCapture -->\r\n      <div class=\"carousel-item active\">\r\n        <PhotoCapture @captured=\"handleCaptured\" />\r\n      </div>\r\n\r\n      <!-- DIAPOSITIVA 2  ·  MapView + semáforo -->\r\n      <div class=\"carousel-item\">\r\n        <transition name=\"fade\">\r\n          <MapView\r\n            v-if=\"step === 2\"\r\n            :coords=\"coords\"\r\n            @ndwi-status=\"updateNdwiStatus\"\r\n          />\r\n        </transition>\r\n\r\n        <div class=\"mt-3 card p-3\" v-if=\"step === 2\">\r\n          <h5>Estado de humedad</h5>\r\n          <div v-if=\"loading\" class=\"text-center\">Calculando NDWI…</div>\r\n          <div v-else>\r\n            <p v-if=\"status\">\r\n              <strong>{{ status }}</strong>\r\n              <span v-if=\"ndwi !== null\"> – NDWI: {{ ndwi.toFixed(2) }}</span>\r\n            </p>\r\n            <p v-else class=\"text-muted\">No se pudo calcular NDWI</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { Carousel }   from 'bootstrap'\r\nimport PhotoCapture   from '@/components/PhotoCapture.vue'\r\nimport MapView        from '@/components/MapView.vue'\r\n\r\n/* estado */\r\nconst step    = ref(1)         // 1 = PhotoCapture, 2 = MapView\r\nconst coords  = ref(null)      // { latitude, longitude }\r\nconst ndwi    = ref(null)\r\nconst status  = ref(null)\r\nconst loading = ref(false)\r\n\r\n/* bootstrap carousel */\r\nconst carouselEl = ref(null)\r\nlet bsCarousel\r\nonMounted(() => {\r\n  bsCarousel = new Carousel(carouselEl.value, { touch: true, interval: false })\r\n})\r\n\r\n/* cuando PhotoCapture emite */\r\nfunction handleCaptured ({ coords: c }) {\r\n  coords.value = c\r\n  loading.value = true\r\n  step.value = 2\r\n  bsCarousel.next()            // va a la diapositiva 2\r\n}\r\n\r\n/* recibir cálculo NDWI */\r\nfunction updateNdwiStatus ({ ndwi: n, status: s }) {\r\n  ndwi.value   = n\r\n  status.value = s\r\n  loading.value = false\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.carousel-indicators {\r\n  position: relative;      /* deja de ser absolute */\r\n  margin-top: 12px;        /* lo separa de la card */\r\n  justify-content: center; /* centra los dots */\r\n  gap: 6px;                /* espacito entre ellos */\r\n  padding: 0;              /* quita el padding default de BS */\r\n}\r\n\r\n/* los propios dots (ya los tenías; ajusto sólo tamaños) */\r\n.carousel-indicators [data-bs-target] {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: #adb5bd;\r\n  border: none;\r\n  opacity: .7;\r\n}\r\n.carousel-indicators .active {\r\n  background: #000;\r\n  opacity: 1;\r\n}\r\n</style>\r\n"],"mappings":"AAsDA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,QAAQ,QAAU,WAAW;AACtC,OAAOC,YAAY,MAAQ,+BAA+B;AAC1D,OAAOC,OAAO,MAAa,0BAA0B;;AAErD;;;;;IACA,MAAMC,IAAI,GAAML,GAAG,CAAC,CAAC,CAAC,EAAS;IAC/B,MAAMM,MAAM,GAAIN,GAAG,CAAC,IAAI,CAAC,EAAM;IAC/B,MAAMO,IAAI,GAAMP,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMQ,MAAM,GAAIR,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMS,OAAO,GAAGT,GAAG,CAAC,KAAK,CAAC;;IAE1B;IACA,MAAMU,UAAU,GAAGV,GAAG,CAAC,IAAI,CAAC;IAC5B,IAAIW,UAAU;IACdV,SAAS,CAAC,MAAM;MACdU,UAAU,GAAG,IAAIT,QAAQ,CAACQ,UAAU,CAACE,KAAK,EAAE;QAAEC,KAAK,EAAE,IAAI;QAAEC,QAAQ,EAAE;MAAM,CAAC,CAAC;IAC/E,CAAC,CAAC;;IAEF;IACA,SAASC,cAAcA,CAAE;MAAET,MAAM,EAAEU;IAAE,CAAC,EAAE;MACtCV,MAAM,CAACM,KAAK,GAAGI,CAAC;MAChBP,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBP,IAAI,CAACO,KAAK,GAAG,CAAC;MACdD,UAAU,CAACM,IAAI,CAAC,CAAC,EAAY;IAC/B;;IAEA;IACA,SAASC,gBAAgBA,CAAE;MAAEX,IAAI,EAAEY,CAAC;MAAEX,MAAM,EAAEY;IAAE,CAAC,EAAE;MACjDb,IAAI,CAACK,KAAK,GAAKO,CAAC;MAChBX,MAAM,CAACI,KAAK,GAAGQ,CAAC;MAChBX,OAAO,CAACG,KAAK,GAAG,KAAK;IACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}